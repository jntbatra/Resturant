{
  "info": {
    "name": "Restaurant Management API - Workflow",
    "description": "Complete API collection with logical workflow for testing Restaurant Management System",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "1. Create Table",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"available\": true\n}"
        },
        "url": {
          "raw": "{{base_url}}/sessions/tables",
          "host": ["{{base_url}}"],
          "path": ["sessions", "tables"]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 201\", function () {",
              "  pm.response.to.have.status(201);",
              "});",
              "",
              "pm.test(\"Response has table data\", function () {",
              "  const jsonData = pm.response.json();",
              "  pm.expect(jsonData).to.have.property('id');",
              "  pm.collectionVariables.set('table_id', jsonData.id);",
              "  console.log('Created table with ID:', jsonData.id);",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "2. Create Category",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"name\": \"{{category_name}}\"\n}"
        },
        "url": {
          "raw": "{{base_url}}/categories",
          "host": ["{{base_url}}"],
          "path": ["categories"]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 201\", function () {",
              "  pm.response.to.have.status(201);",
              "});",
              "",
              "pm.test(\"Response has category data\", function () {",
              "  const jsonData = pm.response.json();",
              "  pm.expect(jsonData).to.have.property('id');",
              "  pm.expect(jsonData).to.have.property('name');",
              "  pm.collectionVariables.set('category_id', jsonData.id);",
              "  pm.collectionVariables.set('category_name', jsonData.name);",
              "  console.log('Created category:', jsonData.name, 'ID:', jsonData.id);",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "3. Create Menu Item",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"name\": \"{{menu_item_name}}\",\n  \"description\": \"{{menu_item_description}}\",\n  \"price\": {{menu_item_price}},\n  \"category\": \"{{category_name}}\"\n}"
        },
        "url": {
          "raw": "{{base_url}}/menu",
          "host": ["{{base_url}}"],
          "path": ["menu"]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 201\", function () {",
              "  pm.response.to.have.status(201);",
              "});",
              "",
              "pm.test(\"Response has menu item data\", function () {",
              "  const jsonData = pm.response.json();",
              "  pm.expect(jsonData).to.have.property('id');",
              "  pm.expect(jsonData).to.have.property('name');",
              "  pm.collectionVariables.set('menu_item_id', jsonData.id);",
              "  console.log('Created menu item:', jsonData.name, 'ID:', jsonData.id);",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "4. Create Session",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"table_id\": \"{{table_id}}\"\n}"
        },
        "url": {
          "raw": "{{base_url}}/sessions",
          "host": ["{{base_url}}"],
          "path": ["sessions"]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 201\", function () {",
              "  pm.response.to.have.status(201);",
              "});",
              "",
              "pm.test(\"Response has session data\", function () {",
              "  const jsonData = pm.response.json();",
              "  pm.expect(jsonData).to.have.property('id');",
              "  pm.expect(jsonData).to.have.property('table_id');",
              "  pm.collectionVariables.set('session_id', jsonData.id);",
              "  console.log('Created session with ID:', jsonData.id, 'for table:', jsonData.table_id);",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "5. Create Order",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"session_id\": \"{{session_id}}\"\n}"
        },
        "url": {
          "raw": "{{base_url}}/orders",
          "host": ["{{base_url}}"],
          "path": ["orders"]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 201\", function () {",
              "  pm.response.to.have.status(201);",
              "});",
              "",
              "pm.test(\"Response has order data\", function () {",
              "  const jsonData = pm.response.json();",
              "  pm.expect(jsonData).to.have.property('id');",
              "  pm.expect(jsonData).to.have.property('session_id');",
              "  pm.collectionVariables.set('order_id', jsonData.id);",
              "  console.log('Created order with ID:', jsonData.id, 'for session:', jsonData.session_id);",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "6. Add Item to Order",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"menu_item_id\": \"{{menu_item_id}}\",\n  \"quantity\": {{item_quantity}}\n}"
        },
        "url": {
          "raw": "{{base_url}}/orders/{{order_id}}/items",
          "host": ["{{base_url}}"],
          "path": ["orders", "{{order_id}}", "items"]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 201\", function () {",
              "  pm.response.to.have.status(201);",
              "});",
              "",
              "pm.test(\"Item added to order successfully\", function () {",
              "  const jsonData = pm.response.json();",
              "  pm.expect(jsonData).to.have.property('id');",
              "  console.log('Added item to order, order item ID:', jsonData.id);",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "7. Get Order Items",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{base_url}}/orders/{{order_id}}/items",
          "host": ["{{base_url}}"],
          "path": ["orders", "{{order_id}}", "items"]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "  pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test(\"Response has order items array\", function () {",
              "  const jsonData = pm.response.json();",
              "  pm.expect(jsonData).to.be.an('array');",
              "  pm.expect(jsonData.length).to.be.greaterThan(0);",
              "  console.log('Order has', jsonData.length, 'items');",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "8. Update Order Status",
      "request": {
        "method": "PUT",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"status\": \"{{order_status}}\"\n}"
        },
        "url": {
          "raw": "{{base_url}}/orders/{{order_id}}",
          "host": ["{{base_url}}"],
          "path": ["orders", "{{order_id}}"]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "  pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test(\"Order updated successfully\", function () {",
              "  const jsonData = pm.response.json();",
              "  pm.expect(jsonData).to.have.property('status');",
              "  console.log('Order status updated to:', jsonData.status);",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "9. Get Orders by Session",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{base_url}}/sessions/{{session_id}}/orders",
          "host": ["{{base_url}}"],
          "path": ["sessions", "{{session_id}}", "orders"]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "  pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test(\"Response has orders array\", function () {",
              "  const jsonData = pm.response.json();",
              "  pm.expect(jsonData).to.be.an('array');",
              "  pm.expect(jsonData.length).to.be.greaterThan(0);",
              "  console.log('Session has', jsonData.length, 'orders');",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "10. Update Session Status",
      "request": {
        "method": "PUT",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"status\": \"{{session_status}}\"\n}"
        },
        "url": {
          "raw": "{{base_url}}/sessions/{{session_id}}",
          "host": ["{{base_url}}"],
          "path": ["sessions", "{{session_id}}"]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "  pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test(\"Session updated successfully\", function () {",
              "  const jsonData = pm.response.json();",
              "  pm.expect(jsonData).to.have.property('status');",
              "  console.log('Session status updated to:', jsonData.status);",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "11. List All Sessions",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{base_url}}/sessions",
          "host": ["{{base_url}}"],
          "path": ["sessions"]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "  pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test(\"Response has sessions array\", function () {",
              "  const jsonData = pm.response.json();",
              "  pm.expect(jsonData).to.be.an('array');",
              "  console.log('Total sessions:', jsonData.length);",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "12. List Menu Items",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{base_url}}/menu",
          "host": ["{{base_url}}"],
          "path": ["menu"]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "  pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test(\"Response has menu items array\", function () {",
              "  const jsonData = pm.response.json();",
              "  pm.expect(jsonData).to.be.an('array');",
              "  console.log('Total menu items:', jsonData.length);",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "13. List Categories",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{base_url}}/categories",
          "host": ["{{base_url}}"],
          "path": ["categories"]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "  pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test(\"Response has categories array\", function () {",
              "  const jsonData = pm.response.json();",
              "  pm.expect(jsonData).to.be.an('array');",
              "  console.log('Total categories:', jsonData.length);",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8080",
      "type": "string"
    },
    {
      "key": "table_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "category_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "category_name",
      "value": "",
      "type": "string"
    },
    {
      "key": "menu_item_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "menu_item_name",
      "value": "",
      "type": "string"
    },
    {
      "key": "menu_item_description",
      "value": "",
      "type": "string"
    },
    {
      "key": "menu_item_price",
      "value": "",
      "type": "string"
    },
    {
      "key": "session_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "session_status",
      "value": "",
      "type": "string"
    },
    {
      "key": "order_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "order_status",
      "value": "",
      "type": "string"
    },
    {
      "key": "item_quantity",
      "value": "",
      "type": "string"
    }
  ]
}